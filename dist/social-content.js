/*! For license information please see social-content.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){"use strict";n=function(){return r};var t,r={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function x(){}var k={};d(k,c,(function(){return this}));var L=Object.getPrototypeOf,E=L&&L(L(H([])));E&&E!==o&&a.call(E,c)&&(k=E);var S=x.prototype=b.prototype=Object.create(k);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function A(t,n){function r(o,i,s,c){var l=f(t[o],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(a,a):a()}})}function C(e,n,r){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=I(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function H(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function e(){for(;++o<n.length;)if(a.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return w.prototype=x,i(S,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},T(A.prototype),d(A.prototype,l,(function(){return this})),r.AsyncIterator=A,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var i=new A(p(e,t,n,o),a);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},T(S),d(S,u,"Generator"),d(S,c,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=H,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:H(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},r}function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}!function(){function e(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){clearTimeout(n),e.apply(void 0,o)}),t)}}function r(e){try{var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),r=JSON.parse(n);return console.log("Decoded JWT payload:",r),console.log("Extracted userId:",r.username),r}catch(e){return console.error("Error decoding JWT:",e),null}}var a,i,s=!1,c=!1,l=null;function u(){document.querySelectorAll(".image-overlay").forEach((function(e){return e.remove()}))}function d(){return p.apply(this,arguments)}function p(){return(p=o(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){chrome.storage.sync.get(["enableOverlay","facebook","twitter","instagram","linkedin","reddit"],(function(n){chrome.runtime.lastError?t(chrome.runtime.lastError):e(n)}))}));case 3:return t=e.sent,s=!1!==t.enableOverlay,c=!1!==t[l],e.abrupt("return",s&&c);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Error in shouldProcessImage:",e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return(h=o(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){e.nodeType===Node.ELEMENT_NODE&&("img"!==e.tagName.toLowerCase()||e.dataset.overlayProcessed||t.push(e),e.shadowRoot&&r(e.shadowRoot),e.childNodes.forEach((function(e){return r(e)})))},e.next=3,d();case 3:if(e.sent){e.next=7;break}return u(),e.abrupt("return");case 7:t=[],r(document.body),"instagram"===l&&document.querySelectorAll('img[srcset], img[src*="instagram"]').forEach((function(e){e.dataset.overlayProcessed||t.push(e)})),"reddit"===l&&document.querySelectorAll('img[alt="Post image"]').forEach((function(e){return t.push(e)})),t.forEach((function(e,t){if(e.width>50&&e.height>50||e.getAttribute("width")>50&&e.getAttribute("height")>50||e.classList.contains("media-lightbox-img"))try{e.complete&&e.naturalWidth>0?m(e,t):e.addEventListener("load",(function(){m(e,t)}),{once:!0})}catch(e){console.error("Error processing image:",e)}else e.dataset.overlayProcessed="skipped"}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){if("true"!==e.dataset.overlayProcessed){var n=new IntersectionObserver((function(r){r.forEach((function(r){r.isIntersecting&&((e.width>100&&e.height>100||"video"===e.tagName.toLowerCase())&&v(e,t),n.unobserve(e))}))}),{threshold:.1});n.observe(e),e.dataset.overlayProcessed="true",e.onerror=function(){},e.onload=function(){(e.width>100&&e.height>100||"video"===e.tagName.toLowerCase())&&v(e,t)}}}function v(t,r){var a="overlay-".concat(r,"-").concat(Date.now()),i=document.querySelector('.image-overlay[data-for-image="'.concat(t.src,'"]'));if(!i){(i=document.createElement("div")).className="image-overlay",i.dataset.forImage=t.src,i.dataset.overlayId=a;var s=document.createElement("img");s.src=chrome.runtime.getURL("icons/realeyes-ai-icon.png"),s.style.cssText="\n        width: 20px;\n        height: 20px;\n        object-fit: contain;\n        ".concat("reddit"===l?"margin-top: 16px;":"","\n      "),i.style.cssText="\n            position: absolute;\n            width: 30px;\n            height: 30px;\n            background-color: rgba(255, 255, 255, 0.4);\n            border-radius: 50%;\n            cursor: pointer;\n            z-index: 2147483647;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 20px;\n            pointer-events: auto;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n            opacity: 0.5;\n            transition: opacity 0.3s ease, background-color 0.3s ease, display 0.3s ease;\n        ",i.appendChild(s),i.onclick=function(){var r=o(n().mark((function r(o){var a,s,c,l,u,d,p,f,h,m;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.stopPropagation(),o.preventDefault(),!(a=document.querySelector('.consent-popup[data-overlay-id="'.concat(i.dataset.overlayId,'"]')))){n.next=6;break}return a.remove(),n.abrupt("return");case 6:return s=x(t),c=i.dataset.overlayId,n.prev=8,n.next=11,chrome.storage.local.get(["authToken"]);case 11:if(n.sent.authToken){n.next=37;break}return document.querySelectorAll(".consent-popup").forEach((function(e){return e.remove()})),(l=document.createElement("div")).className="consent-popup",l.setAttribute("data-overlay-id",i.dataset.overlayId),l.innerHTML='\n              <div class="close-x">×</div>\n              <p class="consent-message">Please log in to analyze images</p>\n              <div class="consent-buttons">\n                <button class="confirm-btn">Log In</button>\n                <button class="cancel-btn">Cancel</button>\n              </div>\n              <div style="color: #666; font-size: 12px; margin-top: 10px; text-align: center;">\n                <svg width="16" height="16" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 5px;">\n                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/>\n                </svg>\n                Or click the RealEyes icon in your browser toolbar\n              </div>\n            ',document.body.appendChild(l),u=function(){var e=i.getBoundingClientRect(),t=window.scrollY||window.pageYOffset,n=e.right+10,r=e.top+t;n+l.offsetWidth>window.innerWidth-10&&(n=e.left-l.offsetWidth-10);var o=document.documentElement.scrollHeight-l.offsetHeight-10;r=Math.max(10,Math.min(r,o)),l.style.position="absolute",l.style.left="".concat(n,"px"),l.style.top="".concat(r,"px")},setTimeout(u,0),d=e(u,100),window.addEventListener("resize",d),window.addEventListener("scroll",d),p=l.querySelector(".close-x"),f=l.querySelector(".confirm-btn"),h=l.querySelector(".cancel-btn"),m=function(){window.removeEventListener("resize",d),window.removeEventListener("scroll",d),l.remove()},p.addEventListener("click",m),f.addEventListener("click",(function(){chrome.runtime.sendMessage({action:"initiateLogin"},(function(e){!chrome.runtime.lastError&&null!=e&&e.success||window.open("https://realeyes.ai/upload-image","_blank")})),l.remove()})),h.addEventListener("click",(function(){l.remove()})),document.addEventListener("click",(function e(t){l.contains(t.target)||i.contains(t.target)||(m(),document.removeEventListener("click",e))})),new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting||m()}))}),{threshold:.1}).observe(i),n.abrupt("return");case 37:s?y(i,s,c):k("No suitable image found.","error"),n.next=44;break;case 40:n.prev=40,n.t0=n.catch(8),console.error("Authentication check failed:",n.t0),k("An error occurred. Please try again.","error");case 44:case"end":return n.stop()}}),r,null,[[8,40]])})));return function(e){return r.apply(this,arguments)}}(),t.parentElement.appendChild(i),i.addEventListener("mouseenter",(function(){i.style.opacity="1",i.style.backgroundColor="rgba(255, 255, 255, 0.8)"})),i.addEventListener("mouseleave",(function(){i.style.opacity="0.5",i.style.backgroundColor="rgba(255, 255, 255, 0.4)"}))}var c=e((function(){var e=t.getBoundingClientRect(),n=window.innerHeight,r=window.innerWidth,o=e.top<n&&e.bottom>0&&e.left<r&&e.right>0,a=null!==t.closest(".media-lightbox-img"),s="video"===t.tagName.toLowerCase()||t.querySelector("video");!o||!(e.width>100&&e.height>100||s)||a&&null===t.offsetParent?s?(i.style.display="flex",i.style.top="10px",i.style.right="10px",i.style.bottom="auto",i.style.left="auto"):setTimeout((function(){o||(i.style.display="none")}),300):(i.style.display="flex",i.style.top="".concat(10,"px"),i.style.right="".concat(10,"px"),i.style.bottom="auto",i.style.left="auto")}),100);c(),t.dataset.overlayEventListenersAdded||(window.addEventListener("scroll",(function(){c()}),{passive:!0}),window.addEventListener("resize",(function(){c()}),{passive:!0}),t.dataset.overlayEventListenersAdded="true"),new MutationObserver((function(e){e.forEach((function(e){"attributes"!==e.type||"src"!==e.attributeName&&"style"!==e.attributeName||(i.dataset.forImage=t.src,c())}))})).observe(t,{attributes:!0,attributeFilter:["src","style"]})}function y(t,r,a){var i,s,c=document.querySelector('.consent-popup[data-for-image="'.concat(r,'"]'));if(c||(c=document.querySelector('.consent-popup[data-overlay-id="'.concat(a,'"]'))),c)return c;document.querySelectorAll(".consent-popup").forEach((function(e){return e.remove()}));var l=document.createElement("div");l.className="consent-popup",l.setAttribute("data-for-image",r),l.setAttribute("data-overlay-id",a),l.innerHTML='\n        <p class="consent-message">Analyze this image?</p>\n        <div class="consent-buttons">\n            <button class="confirm-btn">Analyze Now</button>\n            <button class="cancel-btn">Skip</button>\n        </div>\n        <div class="consent-options">\n            <label class="store-data-option">\n                <input type="checkbox" class="store-data-checkbox" id="storeImageData" checked>\n                <span>Help us improve detection by storing this image</span>\n            </label>\n        </div>\n    ',document.body.appendChild(l);var u=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(l.style.display="flex",d()):l.style.display="none"}))}),{threshold:.1});u.observe(t);var d=function(){if("none"!==l.style.display){var e=t.getBoundingClientRect(),n=window.scrollY||window.pageYOffset,r=e.right+10,o=e.top+n;r+l.offsetWidth>window.innerWidth-10&&(r=e.left-l.offsetWidth-10);var a=document.documentElement.scrollHeight-l.offsetHeight-10;o=Math.max(10,Math.min(o,a)),l.style.position="absolute",l.style.left="".concat(r,"px"),l.style.top="".concat(o,"px")}};new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting||(l.style.display="none")}))}),{threshold:0}).observe(t),setTimeout(d,0);var p=e(d,100);return window.addEventListener("resize",p),window.addEventListener("scroll",p),null===(i=l.querySelector(".confirm-btn"))||void 0===i||i.addEventListener("click",function(){var e=o(n().mark((function e(t){var o,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=l.querySelector("#storeImageData"),a=!!o&&o.checked,l.innerHTML='\n        <div class="loading-indicator">\n            <div class="spinner"></div>\n            <span>Analyzing...</span>\n        </div>\n      ',e.next=6,g(r,l,a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===(s=l.querySelector(".cancel-btn"))||void 0===s||s.addEventListener("click",(function(){window.removeEventListener("resize",p),window.removeEventListener("scroll",p),u.disconnect(),l.remove()})),l}function g(e,t,a){var i=e.split("/").pop().split("?")[0],s="image/jpeg";chrome.storage.local.get(["authToken"],function(){var c=o(n().mark((function o(c){var l,u,d,p,h;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=c.authToken){n.next=8;break}return t.innerHTML='\n          <div class="error-container" style="text-align: center; padding: 15px;">\n            <div class="close-x">×</div>\n            <p style="margin: 0 0 15px;">Please log in to use the extension.</p>\n            <button id="loginButton" style="\n              width: 100%;\n              padding: 10px;\n              margin: 0 auto;\n              display: block;\n              background-color: #2196f3;\n              color: white;\n              border: none;\n              border-radius: 4px;\n              cursor: pointer;\n              transition: background-color 0.3s;\n              font-size: 14px;\n            ">Log In</button>\n          </div>\n        ',(u=t.querySelector("#loginButton")).addEventListener("mouseover",(function(){u.style.backgroundColor="#0d8bf2"})),u.addEventListener("mouseout",(function(){u.style.backgroundColor="#2196f3"})),u.addEventListener("click",(function(){chrome.cookies.get({url:"https://realeyes.ai",name:"opp_access_token"},(function(e){e&&e.value?chrome.storage.local.set({authToken:e.value},(function(){t.remove(),f()})):(window.open("https://realeyes.ai/upload-image","_blank"),t.remove())}))})),n.abrupt("return");case 8:d=r(l),p=(null==d?void 0:d.username)||null,e.includes("twimg.com")?(h=new URL(e).searchParams.get("format"))&&(i+=".".concat(h),s="image/".concat(h)):s=w(i),fetch(e).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.arrayBuffer()})).then((function(e){var t=new Uint8Array(e);return crypto.subtle.digest("SHA-256",t).then((function(e){var n=Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");return{uint8Array:t,hashHex:n}}))})).then((function(n){var r=n.uint8Array,o=n.hashHex;chrome.runtime.sendMessage({action:"sendImage",imageData:{url:e,mimeType:s,filename:i,size:r.length,sha256Hash:o,origin:window.location.origin,storeData:a,userId:p}},(function(e){chrome.runtime.lastError?b(t,"Error: "+chrome.runtime.lastError.message,"error"):"Authentication required"===e.error?b(t,"Authentication required. Please log in and try again.","error"):b(t,e,"success")}))})).catch((function(e){console.error("Error:",e),b(t,"Error: "+e.message,"error")}));case 12:case"end":return n.stop()}}),o)})));return function(e){return c.apply(this,arguments)}}())}function b(e,t,a){var i=e.getAttribute("data-overlay-id");if(e.innerHTML="","error"===a)e.innerHTML='\n        <div class="error-container">\n          <div class="close-x">×</div>\n          <p class="error">'.concat(t,"</p>\n        </div>\n      ");else if("success"===a&&t){var s,c=t.sageMakerAnalysis||{probability:0},l=t.sageMakerAnalysisUFD||{probability:0},u=0===c.probability&&0===l.probability,d=(100*(c.probability>l.probability?c:l).probability).toFixed(1),p="#666",f="This content could not be analyzed.";u||(d<10?(p="#28a745",f="This content is likely real."):d<66?(p="#ffc107",f="This content is uncertain."):(p="#dc3545",f="This content is likely a deepfake."));var h=u?'<span style="font-size: 14px; white-space: normal; text-align: center;">Inference endpoints down</span>':"".concat(d,'%\n           <div class="probability-label" style="\n             font-size: 12px;\n             color: #333;\n             margin-top: 10px;\n           ">Deepfake Probability</div>');e.innerHTML='\n                <div class="close-x">×</div>\n                <div class="analysis-title" style="color: '.concat(p,'">').concat(f,'</div>\n\n        <div class="probability-circle">\n          <svg width="150" height="150" viewBox="0 0 150 150">\n            <circle\n              cx="75"\n              cy="75"\n              r="70"\n              stroke="#E6E6E6"\n              stroke-width="10"\n              fill="none"\n            />\n            <circle\n              cx="75"\n              cy="75"\n              r="70"\n              stroke="').concat(p,'"\n              stroke-width="10"\n              fill="none"\n              stroke-linecap="round"\n              stroke-dasharray="439.82"\n              stroke-dashoffset="').concat(u?439.82:439.82*(1-d/100),'"\n              transform="rotate(-90 75 75)"\n              style="transition: stroke-dashoffset 1s"\n            />\n          </svg>\n          <div class="probability-text">\n            <div class="probability-value" style="color: ').concat(p,'">\n              ').concat(h,'\n            </div>\n          </div>\n        </div>\n\n                <div class="confidence-indicators">\n                    <div class="indicator real">\n                        <div class="indicator-dot"></div>\n                        <div class="indicator-label">Likely Real</div>\n                    </div>\n                    <div class="indicator uncertain">\n                        <div class="indicator-dot"></div>\n                        <div class="indicator-label" style="white-space: nowrap;">Uncertain</div>\n                    </div>\n                    <div class="indicator fake">\n                        <div class="indicator-dot"></div>\n                        <div class="indicator-label">Likely Deepfake</div>\n                    </div>\n                </div>\n\n                <div class="request-count" data-tooltip="').concat(1===t.requestCount?"The analysis results were determined in near-real-time":"Displaying cached analysis results",'">\n                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2ZM12 20C7.6 20 4 16.4 4 12C4 7.6 7.6 4 12 4C16.4 4 20 7.6 20 12C20 16.4 16.4 20 12 20Z" fill="#666"/>\n                        <path d="M12.5 7H11V13L16.2 16.2L17 14.9L12.5 12.2V7Z" fill="#666"/>\n                    </svg>\n                    ').concat(1===t.requestCount?"You're the first to analyze this image":"Image analyzed ".concat(t.requestCount," time").concat(1!==t.requestCount?"s":""),'\n                </div>\n\n                <div class="analysis-details-accordion">\n                    <button class="accordion-button">\n                        <span>View Analysis Details</span>\n                    </button>\n                    \n                    <div class="accordion-content">\n                        <div class="details-section">\n                            <div class="model-comparison">\n                                <div class="model-result ').concat(c.probability>l.probability?"selected":"",'">\n                                    <h4 style="font-size: 12px;">DMImageDetection</h4>\n                                    <div class="model-probability">\n                                        ').concat(void 0!==c.probability?"".concat((100*c.probability).toFixed(1),"%"):"No result",'\n                                    </div>\n                                </div>\n                                <div class="model-result ').concat(l.probability>c.probability?"selected":"",'">\n                                    <h4 style="font-size: 12px;">UniversalFakeDetect</h4>\n                                    <div class="model-probability">\n                                        ').concat(void 0!==l.probability?"".concat((100*l.probability).toFixed(1),"%"):"No result",'\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <a href="https://realeyes.ai/transparency" \n                               class="model-info-link" \n                               target="_blank"\n                               rel="noopener noreferrer">\n                               Learn more about the detection models →\n                            </a>\n                            \n                            <div class="details-grid">\n                                ').concat(H("File Name",t.originalFileName,"Original filename of the uploaded image"),"\n                                ").concat(H("File Size","".concat((t.fileSize/1024).toFixed(2)," KB"),"Size of the image file in kilobytes"),"\n                                ").concat(H("Dimensions","".concat(t.metadata.sharp.width,"x").concat(t.metadata.sharp.height),"Width & height of the image in pixels"),"\n                                ").concat(H("Format",t.metadata.sharp.format.toUpperCase(),"Image file format"),"\n                                ").concat(H("Color Space",t.metadata.sharp.space.toUpperCase(),"Color space used by the image (sRGB, CMYK, etc.)"),"\n                                ").concat(H("Channels",t.metadata.sharp.channels,"Number of color channels in the image"),"\n                                ").concat(H("Bit Depth",t.metadata.sharp.depth,"Number of bits used per color channel. Higher values (e.g., 8-bit, 16-bit) mean more possible colors and smoother gradients"),"\n                                ").concat(H("Resolution","".concat(t.metadata.sharp.density," DPI"),"Image resolution in dots per inch (DPI)"),"\n                                ").concat(H("Chroma Subsampling",t.metadata.sharp.chromaSubsampling,"Type of chroma subsampling used for color compression"),"\n                                ").concat(H("Progressive Loading",t.metadata.sharp.isProgressive?"Yes":"No","A technique where the image loads gradually, starting with a low-quality version that becomes clearer over time. Improves perceived loading speed on slower connections"),"\n                                ").concat(H("Has Alpha Channel",t.metadata.sharp.hasAlpha?"Yes":"No","Whether the image contains transparency"),"\n                                ").concat(H("Color Profile",t.metadata.sharp.hasProfile?"Yes":"No","A set of data that defines how colors should be displayed. Helps ensure consistent color appearance across different devices and screens"),"\n                                ").concat(H("Image Hash",t.imageHash,"A unique digital fingerprint of the image. It can be used to identify identical copies of this image, even if renamed"),"\n                                ").concat(H("Perceptual Hash",t.pHash,"A special type of image fingerprint that can identify visually similar images, even if they've been slightly modified, resized, or compressed"),"\n                                ").concat(H("Upload Date",new Date(t.uploadDate).toLocaleString(),"When the image was uploaded for analysis"),"\n                                ").concat(H("Origin Website",(null===(s=t.originWebsites)||void 0===s?void 0:s[0])||"Unknown","Website where the image originated"),'\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="feedback-section">\n                    <p>Was this analysis helpful?</p>\n                    <div class="feedback-buttons">\n                        <button class="feedback-btn thumbs-up" data-image-hash="').concat(t.imageHash,'" data-value="up">\n                            <span>👍</span>\n                        </button>\n                        <button class="feedback-btn thumbs-down" data-image-hash="').concat(t.imageHash,'" data-value="down">\n                            <span>👎</span>\n                        </button>\n                    </div>\n                    <div class="feedback-comment" style="display: none;">\n                        <div class="textarea-container">\n                            <textarea placeholder="Tell us why (optional)" maxlength="100"></textarea>\n                            <div class="char-counter">0/100 characters</div>\n                        </div>\n                        <button class="submit-feedback-btn">Submit Feedback</button>\n                    </div>\n                </div>\n            ');var m=document.createElement("style");m.textContent="\n                .close-x {\n                    position: absolute;\n                    top: 5px;\n                    right: 10px;\n                    cursor: pointer;\n                    font-size: 20px;\n                    color: #666;\n                    transition: color 0.2s;\n                }\n                .close-x:hover {\n                    color: #333;\n                }\n            ",document.head.appendChild(m);var v=e.querySelectorAll(".feedback-btn"),y=e.querySelector(".feedback-comment"),g=e.querySelector(".submit-feedback-btn"),b=e.querySelector("textarea"),w=e.querySelector(".char-counter");v.forEach((function(e){e.addEventListener("click",(function(){v.forEach((function(e){return e.classList.remove("active")})),e.classList.add("active"),y.style.display="block"}))})),b.addEventListener("input",(function(){var e=b.value.length;w.textContent="".concat(e,"/100 characters"),w.classList.remove("near-limit","at-limit"),e>=90?w.classList.add("at-limit"):e>=75&&w.classList.add("near-limit")})),g.addEventListener("click",o(n().mark((function t(){var o,a,i,s,c,l,u,d,p,f,h,m;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.disabled=!0,g.innerHTML='\n            <span class="spinner"></span>\n            Sending...\n          ',t.next=4,chrome.storage.local.get(["authToken"]);case 4:if(i=t.sent,s=i.authToken,console.log("Retrieved authToken:",s?"Token exists":"No token found"),s){t.next=11;break}return console.error("No auth token found"),g.innerHTML="Error: Please log in",t.abrupt("return");case 11:if(c=r(s),l=(null==c?void 0:c.username)||null,console.log("Final userId to be submitted:",l),u=e.querySelectorAll(".feedback-btn"),d=e.querySelector("textarea"),p=u[0].dataset.imageHash,f=null===(o=Array.from(u).find((function(e){return e.classList.contains("active")})))||void 0===o?void 0:o.getAttribute("data-value"),h=(null==d||null===(a=d.value)||void 0===a?void 0:a.trim())||"",f){t.next=22;break}return console.error("No feedback selected"),t.abrupt("return");case 22:console.log("Submitting feedback with data:",{imageHash:p,feedbackType:f,comment:h,userId:l});try{chrome.runtime.sendMessage({action:"submitFeedback",feedbackData:{imageHash:p,feedbackType:f,comment:h,userId:l},origin:window.location.origin},(function(t){console.log("Feedback submission response:",t);var n=e.querySelector(".feedback-section");if(n.style.marginTop="0",t.success){var r,o,a;switch(t.data.message){case"Feedback already received":r="#3498db",o="Already Submitted",a="You've already provided feedback for this image";break;case"Feedback updated successfully":r="#2196F3",o="Feedback Updated",a="Your feedback has been updated successfully";break;default:r="#4CAF50",o="Thank you!",a="Your feedback helps improve our analyses"}n.innerHTML='\n                    <div class="feedback-success">\n                        <div class="icon-container">\n                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">\n                                <circle cx="26" cy="26" r="25" fill="none" stroke="'.concat(r,'" stroke-width="2"/>\n                                <path fill="none" stroke="').concat(r,'" stroke-width="2" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>\n                            </svg>\n                        </div>\n                        <h3 class="feedback-title" style="color: ').concat(r,'">').concat(o,'</h3>\n                        <p class="feedback-message">').concat(a,"</p>\n                    </div>\n                ")}else{g.disabled=!1,g.innerHTML="Submit Feedback";var i=document.createElement("p");i.className="feedback-error",i.textContent="Error: ".concat(t.error||"Failed to submit feedback"),g.parentNode.insertBefore(i,g.nextSibling)}}))}catch(e){console.error("Error in feedback submission:",e),g.disabled=!1,g.innerHTML="Submit Feedback",(m=document.createElement("p")).className="feedback-error",m.textContent="Error: Failed to submit feedback",g.parentNode.insertBefore(m,g.nextSibling)}case 24:case"end":return t.stop()}}),t)})))),console.log("Feedback buttons:",{feedbackBtns:e.querySelectorAll(".feedback-btn"),submitBtn:e.querySelector(".submit-feedback-btn"),feedbackComment:e.querySelector("textarea")}),b.addEventListener("input",(function(){var e=b.value.length;w.textContent="".concat(e,"/100 characters"),w.classList.remove("near-limit","at-limit"),e>=90?w.classList.add("at-limit"):e>=75&&w.classList.add("near-limit")}));var x=e.querySelector(".accordion-button"),k=e.querySelector(".accordion-content");x.addEventListener("click",(function(){var e="block"===k.style.display;k.style.display=e?"none":"block",x.querySelector("span").textContent=e?"View Analysis Details":"Hide Analysis Details"}));var L=e.querySelector(".model-result.selected");L&&(L.addEventListener("mousemove",(function(e){var t=L,n=e.clientX+15,r=e.clientY+15;t.style.setProperty("--tooltip-x","".concat(n,"px")),t.style.setProperty("--tooltip-y","".concat(r,"px"))})),L.addEventListener("mouseleave",(function(){L.style.setProperty("--tooltip-visibility","hidden"),L.style.setProperty("--tooltip-opacity","0")})))}else e.innerHTML='\n        <div class="error-container">\n          <div class="close-x">×</div>\n          <p class="error">No analysis results available</p>\n        </div>\n      ';e.setAttribute("data-overlay-id",i);var E=e.querySelector(".close-x");E&&E.addEventListener("click",(function(){e.remove()}))}function w(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[e.split(".").pop().toLowerCase()]||"application/octet-stream"}function x(e){if("instagram"===l){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight,t.getContext("2d").drawImage(e,0,0);try{return t.toDataURL("image/jpeg")}catch(t){return console.error("Failed to get image data:",t),e.src}}var n=e.src,r=n;if("linkedin"===l){if(null!==e.closest(".feed-shared-celebration-image"))return n;try{var o=new URL(n),a=o.pathname;o.searchParams.delete("w"),o.searchParams.delete("h"),o.searchParams.set("w","1000"),o.searchParams.set("h","1000"),r=o.toString();var i=a.split(".").pop().toLowerCase();["jpg","jpeg","png","gif","webp"].includes(i)&&(r.toLowerCase().endsWith(".".concat(i))||(r+=".".concat(i)))}catch(e){console.error("Failed to parse LinkedIn image URL:",e),r=n}}else if("instagram"===l&&n.includes("&_nc_ht="))try{var s=new URL(n);s.searchParams.delete("_nc_sid"),s.searchParams.delete("_nc_ohc"),s.searchParams.delete("_nc_ht"),s.searchParams.delete("edm"),s.searchParams.delete("oh"),s.searchParams.delete("oe"),r=s.toString()}catch(e){console.error("Failed to parse Instagram image URL:",e)}return r}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=document.createElement("div");r.className="realeyes-message";var o={error:"❌",warning:"⚠️",success:"✅",info:"ℹ️"};r.innerHTML='\n      <span class="message-icon">'.concat(o[t]||o.info,'</span>\n      <span class="message-text">').concat(e,"</span>\n    "),Object.assign(r.style,{position:"fixed",bottom:"20px",right:"20px",padding:"12px 24px",borderRadius:"8px",color:"#fff",backgroundColor:{error:"#f44336",warning:"#ff9800",success:"#4caf50",info:"#2196f3"}[t]||"#2196f3",zIndex:"2147483647",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",opacity:"0",transform:"translateY(20px)"}),document.body.appendChild(r),requestAnimationFrame((function(){r.style.opacity="1",r.style.transform="translateY(0)"})),setTimeout((function(){r.style.opacity="0",r.style.transform="translateY(20px)",r.addEventListener("transitionend",(function(){return r.remove()}))}),n)}var L=e(f,500);function E(e){var n,r=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(("childList"===o.type||"attributes"===o.type)&&(o.addedNodes.length>0||"attributes"===o.type&&"src"===o.attributeName)){clearTimeout(q),q=setTimeout((function(){f()}),P);break}}}catch(e){r.e(e)}finally{r.f()}}function S(){document.querySelectorAll("img:not([data-overlay-processed])").forEach((function(e,t){return m(e,t)}))}function T(){return A.apply(this,arguments)}function A(){return(A=o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:e.sent&&f();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return I.apply(this,arguments)}function I(){return(I=o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(chrome.runtime&&chrome.runtime.id){t.next=2;break}return t.abrupt("return");case 2:if(r=window.location.hostname,!(l=r.includes("linkedin.com")?"linkedin":r.includes("facebook.com")?"facebook":r.includes("twitter.com")||r.includes("x.com")?"twitter":r.includes("instagram.com")?"instagram":r.includes("reddit.com")?"reddit":null)){t.next=9;break}return t.next=7,d();case 7:t.sent?(s=!0,c=!0,T(),(a=new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("img:not([data-overlay-processed])").forEach((function(e,t){return m(e,t)}))}))}))}))).observe(document.body,{childList:!0,subtree:!0}),setInterval(S,2e3),window.addEventListener("scroll",e((function(){f()}),200)),(i=new MutationObserver(E)).observe(document.body,{childList:!0,subtree:!0})):(s=!1,c=!1,u(),a&&a.disconnect(),i&&i.disconnect(),window.removeEventListener("scroll",L));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}setInterval((function(){chrome.runtime.id||location.reload()}),6e4),chrome.runtime.onMessage.addListener((function(e,t,n){return"settingsChanged"===e.action&&((o=e.changes).enableOverlay&&(s=o.enableOverlay.newValue),C(),n({success:!0})),"updateSettings"===e.action&&(r=e.settings,s=!1!==r.enableOverlay,c=!1!==r[l],s&&c?(document.querySelectorAll(".image-overlay").forEach((function(e){e.style.display="flex"})),f()):document.querySelectorAll(".image-overlay").forEach((function(e){e.style.display="none"})),n({status:"Settings updated"})),!0;var r,o})),C();var q,N=document.createElement("style");N.innerHTML="",document.head.appendChild(N);var P=300;window.addEventListener("error",(function(e){e.error}));var H=function(e,t,n){return'\n    <div class="detail-row">\n        <span class="detail-label" title="'.concat(n,'">').concat(e,'</span>\n        <span class="detail-value">').concat(t,"</span>\n    </div>\n  ")};chrome.runtime.onMessage.addListener((function(e,t,n){"authStateChanged"===e.action&&(e.isAuthenticated?(console.log("User authenticated, refreshing overlays"),T()):(console.log("User logged out, removing overlays"),u()))}))}()})();